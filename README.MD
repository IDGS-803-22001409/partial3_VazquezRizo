# Sistema de AutenticaciÃ³n con Flask-Login y GestiÃ³n de Pedidos

Este proyecto implementa un sistema de autenticaciÃ³n completo utilizando Flask-Login y un sistema de gestiÃ³n de pedidos de pizza, todo presentado con una interfaz moderna gracias a Tailwind CSS y Flowbite.

![PÃ¡gina de Login](screenshots/login.png)

## CaracterÃ­sticas

- âœ… Sistema de registro de usuarios
- ğŸ” AutenticaciÃ³n segura
- ğŸ›¡ï¸ ProtecciÃ³n de rutas con `login_required`
- ğŸ”„ Funcionalidad "Recordarme"
- ğŸ• Sistema integrado de pedidos de pizza
- ğŸ“Š Reportes de ventas por dÃ­a y mes
- ğŸ“± DiseÃ±o responsive con Tailwind CSS
- ğŸ§© Componentes interactivos con Flowbite

## InvestigaciÃ³n: Flask-Login

### Â¿Para quÃ© sirve Flask-Login?

Flask-Login es una extensiÃ³n para Flask que proporciona gestiÃ³n de sesiones de usuario para aplicaciones web. Facilita tareas comunes como:

- Almacenar el ID del usuario activo en la sesiÃ³n de Flask
- Cerrar sesiÃ³n de usuarios
- Restringir vistas a usuarios autenticados o no autenticados
- Manejar la funcionalidad "recordarme" para sesiones prolongadas
- Proteger las sesiones de los usuarios contra robos de cookies

Flask-Login no impone un mÃ©todo especÃ­fico de almacenamiento de datos ni restringe a usar nombres de usuario y contraseÃ±as, permitiendo flexibilidad en la implementaciÃ³n.

### Â¿CÃ³mo se implementa Flask-Login en Flask?

1. **InstalaciÃ³n**: `pip install flask-login`

2. **ConfiguraciÃ³n bÃ¡sica**:
   ```python
   from flask_login import LoginManager
   
   login_manager = LoginManager()
   login_manager.init_app(app)
   login_manager.login_view = 'login'  # PÃ¡gina a la que redirigir si no hay sesiÃ³n
   ```

3. **ImplementaciÃ³n de la clase User**:
   ```python
   from flask_login import UserMixin
   
   class User(db.Model, UserMixin):
       id = db.Column(db.Integer, primary_key=True)
       username = db.Column(db.String(80), unique=True, nullable=False)
       password_hash = db.Column(db.Text)
       
       def set_password(self, password):
           self.password_hash = generate_password_hash(password)
           
       def check_password(self, password):
           return check_password_hash(self.password_hash, password)
   ```

4. **DefiniciÃ³n del user_loader**:
   ```python
   @login_manager.user_loader
   def load_user(user_id):
       return User.query.get(int(user_id))
   ```

### Â¿CÃ³mo se protegen las rutas con Flask-Login?

Flask-Login proporciona el decorador `login_required` que protege las rutas para que solo puedan ser accedidas por usuarios autenticados:

```python
from flask_login import login_required, current_user

@app.route('/dashboard')
@login_required
def dashboard():
    return render_template('dashboard.html')
```

Si un usuario no autenticado intenta acceder a esta ruta, serÃ¡ redirigido automÃ¡ticamente a la vista definida en `login_manager.login_view`, generalmente una pÃ¡gina de inicio de sesiÃ³n.

## Sistema de GestiÃ³n de Pedidos de Pizza

Este proyecto incluye un sistema completo de gestiÃ³n de pedidos de pizza con las siguientes funcionalidades:

- Registro de datos del cliente (nombre, direcciÃ³n, telÃ©fono)
- SelecciÃ³n de tamaÃ±o de pizza (Chica, Mediana, Grande)
- SelecciÃ³n de ingredientes (JamÃ³n, PiÃ±a, ChampiÃ±ones)
- CÃ¡lculo automÃ¡tico de precios segÃºn tamaÃ±o e ingredientes
- GestiÃ³n de mÃºltiples pizzas por pedido
- VisualizaciÃ³n de ventas del dÃ­a
- GeneraciÃ³n de reportes de ventas por dÃ­a o mes

## TecnologÃ­as utilizadas

- **Flask**: Framework web ligero para Python
- **Flask-Login**: ExtensiÃ³n para manejo de sesiones de usuario
- **SQLAlchemy**: ORM para interacciÃ³n con la base de datos
- **Tailwind CSS**: Framework CSS para diseÃ±o moderno
- **Flowbite**: Biblioteca de componentes basada en Tailwind CSS
- **MySQL**: Sistema de gestiÃ³n de base de datos relacional

## ConfiguraciÃ³n del proyecto

### Requisitos previos

- Python 3.7+
- MySQL
- Node.js y npm (para Tailwind CSS y Flowbite)

### InstalaciÃ³n

1. **Clonar el repositorio**

   ```bash
   git clone https://github.com/IDGS-803-22001409/partial3_VazquezRizo.git
   cd partial3_VazquezRizo
   ```

2. **Crear un entorno virtual**

   ```bash
   python -m venv env
   
   # En Windows
   env\Scripts\activate
   
   # En macOS/Linux
   source env/bin/activate
   ```

3. **Instalar dependencias de Python**

   ```bash
   pip install -r requerimientos.txt
   ```

4. **Instalar dependencias de Node.js**

   ```bash
   npm install tailwindcss flowbite
   ```

5. **Configurar la base de datos**

   Crea una base de datos MySQL llamada `flaskBDLogin` y ajusta la configuraciÃ³n de conexiÃ³n en `config.py` si es necesario.

6. **Generar CSS con Tailwind**

   ```bash
   npx tailwindcss -i ./static/src/input.css -o ./static/src/output.css --watch
   ```

### EjecuciÃ³n del proyecto

1. **Iniciar la aplicaciÃ³n**

   ```bash
   python app.py
   ```

2. **Acceder a la aplicaciÃ³n**

   Abre tu navegador y visita `http://127.0.0.1:5000`

## Estructura del proyecto

```
flask-login/
â”‚
â”œâ”€â”€ app.py                 # Archivo principal de la aplicaciÃ³n
â”œâ”€â”€ config.py              # ConfiguraciÃ³n de la aplicaciÃ³n
â”œâ”€â”€ models.py              # Modelos de datos (usuarios, clientes, pedidos)
â”œâ”€â”€ forms.py               # Formularios para login, registro y pedidos
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ input.css      # Archivo CSS de entrada para Tailwind
â”‚   â”‚   â””â”€â”€ output.css     # Archivo CSS generado por Tailwind
â”‚   â””â”€â”€ node_modules/      # Dependencias de JavaScript
â””â”€â”€ templates/
    â”œâ”€â”€ base.html          # Plantilla base
    â”œâ”€â”€ login.html         # PÃ¡gina de login
    â”œâ”€â”€ register.html      # PÃ¡gina de registro
    â”œâ”€â”€ dashboard.html     # PÃ¡gina principal despuÃ©s del login
    â”œâ”€â”€ pedidos.html       # Sistema de pedidos de pizza
    â””â”€â”€ ventas.html        # Reportes de ventas
```

## Capturas de pantalla

### PÃ¡gina de Login
![PÃ¡gina de Login](screenshots/login.png)

### PÃ¡gina de Registro
![PÃ¡gina de Registro](screenshots/register.png)

### Dashboard
![Dashboard](screenshots/dashboard.png)

### Sistema de Pedidos
![Pedidos](screenshots/pedidos.png)

### Reporte de Ventas
![Ventas](screenshots/ventas.png)

## Contribuciones

Este proyecto fue creado como parte de un ejercicio acadÃ©mico. 

## Autor

Sergio Esteban VÃ¡zquez Rizo - [checoevr@gmail.com](mailto:checoevr@gmail.com)

---

ğŸ‘¨â€ğŸ’» Desarrollado como parte del curso de Desarrollo Web con Python